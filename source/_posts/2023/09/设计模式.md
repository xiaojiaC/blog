---
title: 设计模式
date: 2023-09-03 19:00:01
categories:
  - [设计模式]
tags:
  - design patterns
---

{% centerquote %}

意图降低对象之间的耦合，增加程序的可复用性、可扩展性、可靠性和可维护性。

{% endcenterquote %}

### 设计原则

| 设计原则     | 含义                                                                     | 目的                         |
| ------------ | ------------------------------------------------------------------------ | ---------------------------- |
| 开闭原则     | 对扩展开放，对修改关闭                                                   | 降低维护带来的新风险         |
| 单一职责原则 | 一个类应该只有一个引起变化的原因                                         | 便于理解，提高代码的可读性   |
| 接口隔离原则 | 一个接口只干一件事，接口要精简单一                                       | 功能解耦，高聚合低耦合       |
| 依赖倒置原则 | 高层不应该依赖低层；抽象不应该依赖细节，细节应该依赖抽象；要面向接口编程 | 利于代码结构的升级扩展       |
| 最少知识法则 | 不该知道的不要知道，一个类应该保持对其它对象最少的了解                   | 只和你的密友说话，降低耦合度 |
| 里氏替换原则 | 不要破坏继承体系，子类重写方法功能发生改变，不应该影响父类方法的含义     | 防止继承泛滥                 |
| 组合复用原则 | 尽量使用组合或者聚合关系实现代码复用，少使用继承                         | 降低代码耦合                 |

<!-- more -->

### 设计模式

- 单例：确保某一个类只有一个实例存在。
- 工厂方法：创建单个产品实例。
- 抽象工厂：创建一族产品实例。
- 建造者：允许创建不同口味的对象以避免构造器污染。
- 抽象文档：为对象添加类型安全的动态属性。
- 享元：用共享技术来有效地支持大量细粒度对象的复用。
- 代理：代理某个对象的行为和方法，添加自定义功能。
- 活动对象：有自己的控制机制线程，封装对象方法的执行仅公开其 API，使方法调用与方法执行脱钩。
- 组合：可以使客户统一对待单个对象和组合对象。
- 访问者：允许将功能添加到现有的类层次结构中，而无需修改层次结构。
- 非循环访问者：同访问者，但没有循环依赖的问题（被访问者依赖访问者基类，访问者依赖被访问者所有子类）。
- 适配器：将一个接口转换成另一个客户所期望的接口。
- 桥接：将抽象与其实现分离，从而使两个层次结构可以独立变化。
- 回调：传递给调用者的方法，它将在定义的时刻被调用。
- 命令：对请求进行封装，将命令的发出和命令的执行解耦开。
- 装饰器：装饰对象动态为其添加额外行为。
- 门面：为一个子系统中的一系列接口提供一个简单统一的接口。
- 迭代器：不暴露容器内部表示的一种顺序访问元素的方式。
- 观察者：一个对象的改变导致所有依赖它的对象都将自动通知或更新。
- 策略：在运行时选择最匹配的算法。
- 模板方法：定义算法骨架，将某些步骤推迟到子类实现。
- 状态：允许对象在内部状态改变时改变它的行为。（与策略模式类图相似，区别在于：策略模式会控制对象使用什么策略，而状态模式会自动改变对象状态流转。）

### UML 类图

- `o--`: 聚合，整体与局部关系，局部可以脱离整体存在，具有各自的生命周期。表示 has-a（实例变量），例如公司与员工 `Company o-- Employee`
- `*--`: 组合，整体与局部关系，局部不可以脱离整体存在，其生命周期应该是一致的。表示 contain-a（实例变量），例如大脑与人类 `Person \*-- Brain`
- `--|>`: 继承，箭头从子类指向父类。表示 is-a（extends），例如柴犬与狗 `ShibaInu --|> Dog`
- `..|>`: 实现，箭头从实现类指向接口。表示 is-a（implement），例如狗与动物 `Dog ..|> Animal`
- `..>`: 依赖，箭头从使用类指向被依赖的类。表示 一个类调用被依赖类中的某些方法而得以完成这个类的一些职责。（局部变量，方法中的参数和对静态方法的调用）
- `-->`/`"+attr1"-->"-attr2"`: 单向关联，箭头从使用类指向被关联的类，可注明关联的属性。例如：`A --> B`，表示 B 类作为 A 类的属性。（实例变量）
- `--`/`"1"--"N"`: 双向关联，箭头从使用类指向被关联的类，可注明 1 对多、或多对一。例如：`A "1"--"N" B`，表示 B 类作为 A 类的属性同时，A 类也是 B 类的属性。（实例变量）

> [plantuml class diagram](https://plantuml.com/zh/class-diagram)
